{% extends 'base/base.html' %}

{% block SUBTITLE %}
    Stock
{%endblock%}
{% block searchList %}
{% endblock %}
{% block content %}
<form method="post">
    {% csrf_token %}
    <table>{{ form.as_table }}</table>

    <br>
    <button type="submit" class="btn btn-primary">Guardar</button>
    {% block cancelar %}
        <a id="someIDA" class = "btn btn-secondary" href="{% url 'betaNegocio:cad_stock_listar' %}">Cancelar</a>
    {% endblock %}

</form>

{% endblock %}

{% block scripts%}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script>
     $( document ).ready(function() {
        $("#id_valor_insumo").attr("disabled","disabled")
        var cantidad_mov = $("#id_cantidad_mov");
        var precio_unitario = $("#id_precio_unitario");
        console.log("YEAHIN111");


        (cantidad_mov).bind('keyup change',function(){
            var total=isNaN(parseInt(cantidad_mov.val()* $("#id_precio_unitario").val())) ? 0 :(cantidad_mov.val()* $("#id_precio_unitario").val())
            console.log("YEAHIN222");
            $("#id_valor_insumo").val(total);
        });

        (precio_unitario).bind('keyup change',function(){
            var total=isNaN(parseInt(cantidad_mov.val()* $("#id_precio_unitario").val())) ? 0 :(cantidad_mov.val()* $("#id_precio_unitario").val())
            console.log("YEAHIN222");
            $("#id_valor_insumo").val(total);
        });






     	console.log("OKOKOK");
     	var loc = window.location.href
        if (loc.toLowerCase().search('editar') >=0 ){
            console.log("Si Hay cadenas");
            $("#id_cod_insumo").attr("disabled","disabled")
            $("#id_fec_movimiento").attr("disabled","disabled")
            $("#id_num_veces").attr("disabled","disabled")
        }

        else{
            console.log("NOHAYCADENASd");
        }
     	$.fn.select2.defaults.set( "theme", "bootstrap" );
        $.fn.select2.defaults.set( "width", "auto" );
        $.fn.select2.defaults.set( "placeholder", "Seleccione" );
        $.fn.select2.defaults.set( "selectOnClose", "true" );
        $('.js-example-basic-single').select2();


    });



    $('Form').submit(function() {
        $('#id_cod_insumo').removeAttr('disabled');
        $('#id_fec_movimiento').removeAttr('disabled');
        $('#id_num_veces').removeAttr('disabled');
        $('#id_valor_insumo').removeAttr('disabled');

        console.log("HERErerer")
    });
  </script>
{% endblock %}